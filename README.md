# Multi Restaurant API

Version: 1.0.0

Author: Emmanuel Kotoka
Email: emmanuelyayrakotoka@gmail.com

## Overview

Multi Restaurant API is a Django + Django REST Framework backend for a multi-restaurant ordering application. It provides registration and role-based accounts (customers and owners), restaurant and menu management, shopping cart functionality, and order placement. The project exposes a RESTful API documented with drf-spectacular.

This repository is intended as the backend for a food-ordering service (think multi-restaurant marketplace).

## Features

- Customer and Owner registration
- User profiles
- JWT authentication (Djoser / SimpleJWT)
- Restaurant CRUD (owners only)
- Menu management per restaurant
- Shopping cart and cart item management
- Place orders from cart contents
- OpenAPI / Swagger documentation via drf-spectacular

## Tech stack

- Python 3.11+
- Django 4.x
- Django REST Framework
- Djoser (auth helpers)
- drf-spectacular (OpenAPI)
- SQLite by default (can switch to PostgreSQL)

## Quickstart (local development)

1. Clone the repository:

```bash
git clone https://github.com/yourusername/multi-restaurant-api.git
cd multi-restaurant-api
```

2. Create and activate a virtual environment:

On macOS / Linux:

```bash
python -m venv .venv
source .venv/bin/activate
```

On Windows (cmd.exe):

```cmd
python -m venv .venv
.venv\Scripts\activate
```

3. Install dependencies:

```bash
pip install -r requirements.txt
```

4. Configure environment variables (see "Environment variables" below).

5. Apply database migrations:

```bash
python manage.py migrate
```

6. (Optional) Create a superuser:

```bash
python manage.py createsuperuser
```

7. Run the development server:

```bash
python manage.py runserver
```

The API will be available at http://127.0.0.1:8000/ by default.

## Environment variables

You can set environment variables in your shell or use a `.env` loader. Common variables used by this project:

- SECRET_KEY - Django secret key (set for production)
- DEBUG - `True` or `False`
- DATABASE_URL - (optional) database connection string if using PostgreSQL
- ALLOWED_HOSTS - comma-separated list of allowed hosts

The project defaults to SQLite when no custom `DATABASE_URL` is provided.

## API documentation

While the server is running you can view interactive API docs generated by drf-spectacular:

- OpenAPI schema JSON: `http://127.0.0.1:8000/api/schema/`
- Swagger UI: `http://127.0.0.1:8000/api/docs/`

(Exact paths may vary depending on `config/urls.py` and your API prefix.)

## Important endpoints (examples)

These are the primary endpoints implemented in this project. Confirm exact routes in `config/urls.py` and app `urls.py` files.

- `POST /api/v1/register/customer/` — Register a customer
- `POST /api/v1/register/owner/` — Register an owner
- `POST /api/v1/token/` — Obtain JWT token
- `POST /api/v1/token/refresh/` — Refresh JWT token
- `GET /api/v1/users/me/` — Retrieve or update current user

Cart & orders (examples):
- `GET /api/v1/cart/` — Retrieve current user's cart
- `POST /api/v1/cart/items/` — Add an item to cart
- `PATCH /api/v1/cart/items/<item_id>/` — Update quantity
- `DELETE /api/v1/cart/items/<item_id>/` — Remove item
- `POST /api/v1/orders/` — Place an order from cart

Restaurants & menu (owners):
- `GET /api/v1/restaurants/` — List restaurants owned by user
- `POST /api/v1/restaurants/` — Create restaurant
- `PATCH /api/v1/restaurants/<pk>/` — Update restaurant
- `DELETE /api/v1/restaurants/<pk>/` — Delete restaurant
- `POST /api/v1/restaurants/<restaurant_pk>/menu/` — Create menu item
- `PATCH /api/v1/menu/<pk>/` — Update menu item
- `DELETE /api/v1/menu/<pk>/` — Delete menu item

Note: Replace `/api/v1/` with your configured API prefix if different.

## Running tests

Run the Django test suite with:

```bash
python manage.py test
```

If you want to run tests in a Windows `cmd.exe` shell the same command works.

## Linters & documentation checks (suggested)

To help maintain code quality consider adding these tools locally or to CI:

- ruff (fast linter / formatter)
- black (formatting)
- pydocstyle or ruff's docstring rules (to enforce docstrings)

Example (install and run):

```bash
pip install ruff black pydocstyle
ruff check .
black --check .
pydocstyle .
```

## Development notes

- Authorization & authentication are handled by Djoser and JWT (check `settings.py`).
- API schema generation uses drf-spectacular; endpoints decorated with `@extend_schema` appear with tags in the OpenAPI docs.
- The `cart` app handles Cart and CartItem models and serializers.
- The `orders` app converts cart contents into Order + OrderItem and clears the cart after successful order placement.

## Contribution

Contributions are welcome. Suggested workflow:

1. Fork the repository
2. Create a feature branch
3. Run tests and linters locally
4. Open a PR with a concise description and tests for new behavior

Please follow PEP8 and keep changes focused and well-documented.

## Contact

Emmanuel Kotoka — emmanuelyayrakotoka@gmail.com

---

If you want, I can also:

- Add more example requests and sample JSON payloads for each endpoint
- Add a `requirements.txt` or `pyproject.toml` snippet if you want it generated
- Add Dockerfiles / docker-compose for local development

Tell me which of those you'd like next and I'll update the README accordingly.
